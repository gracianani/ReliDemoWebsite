@model ReliDemo.Models.Station

@{
    ViewBag.Title = "BasicInfo";
    Layout = "~/Views/Shared/_Layout.cshtml";
}

<div class="row-fluid">
<div class="span8">
<p>
    @Html.ActionLink("返回热力站列表", "Paged")
</p>
</div>
</div>
<div class="row-fluid">

<h1>@Model.热力站名称
    <small>
    @Html.Partial("_TopMenu")
    </small>
</h1>
<div class="span8"></div>
</div>
<div class="row-fluid">
    <div class="box ">
    <table class="table">
        <tr>
            <th>@Html.DisplayNameFor(model => model.热力站编号)
            </th>
            <td>@Html.DisplayFor(model => model.热力站编号)
            </td>
            <th>@Html.DisplayNameFor(model => model.热力站编码)
            </th>
            <td>@Html.DisplayFor(model => model.热力站编码)
            </td>
            <th>@Html.DisplayNameFor(model => model.管理单位)
            </th>
            <td>@Html.DisplayFor(model => model.管理单位)
            </td>
        </tr>
        <tr>
            <th>@Html.DisplayNameFor(model => model.公司)</th>
            <td>@Html.DisplayFor(model => model.公司)</td>
            <th>@Html.DisplayNameFor(model => model.用热地址)</th>
            <td>@Html.DisplayFor(model => model.用热地址)</td>
            <th>@Html.DisplayNameFor(model => model.站面积)</th>
            <td>@Html.DisplayFor(model => model.站面积)</td>
        </tr>
        <tr>
            <th>@Html.DisplayNameFor(model => model.热力站行政区)</th>
            <td>@Html.DisplayFor(model => model.热力站行政区)</td>
            <th>@Html.DisplayNameFor(model => model.面积A)</th>
            <td>@Html.DisplayFor(model => model.面积A)</td>
            <th>@Html.DisplayNameFor(model => model.面积B)</th>
            <td>@Html.DisplayFor(model => model.面积B)</td>
        </tr>
        <tr>
            <th>@Html.DisplayNameFor(model => model.投入面积A)</th>
            <td>@Html.DisplayFor(model => model.投入面积A)</td>
            <th>@Html.DisplayNameFor(model => model.投入面积B)</th>
            <td>@Html.DisplayFor(model => model.投入面积B)</td>
            <th></th>
            <td></td>
        </tr>
    </table>
    </div>
</div>
<div class="row-fluid">
    <div class="box span12">
        <div class="box-header">
            <h2><i class="icon-list"></i>机组信息</h2>
        </div>
        <div class="box-content">
            <div class="box ">
            <table class="table">
                <tr>
                    <td>一次供温(℃) <span>@Model.一次供温</span></td>
                    <td>一次回温(℃) <span>@Model.一次回温</span></td>
                    <td>一次供压(mPa) <span>@Model.一次供压</span></td>
                    <td>一次回压(mPa) <span>@Model.一次回压</span></td>
                    <td>总累计热量(GJ) <span>@Model.总累计热量</span></td>
                    <td>总累计流量(t) <span>@Model.总累计流量</span></td>
                </tr>
            </table>
            </div>
            <div class="box ">
            <table class="table">
                <tr>
                    <th>机组编号</th>
                    <th>机组名</th>
                    <th>二次供温(℃)</th>
                    <th>二次回温(℃)</th>
                    <th>二次供压(mPa)</th>
                    <th>二次回压(mPa)</th>
                    <th>瞬时热量(GJ)</th>
                    <th>瞬时流量(t)</th>
                    <th>总累计热量(GJ)</th>
                    <th>总累计流量(t)</th>
                </tr>
                @foreach (var station2nd in Model.Station2ndRecents)
                {
                    <tr>
                        <td>@station2nd.机组号</td>
                        <td>@station2nd.机组名</td>
                        <td>@station2nd.供温</td>
                        <td>@station2nd.回温</td>
                        <td>@station2nd.供压</td>
                        <td>@station2nd.回压</td>
                        <td>@station2nd.瞬时热量</td>
                        <td>@station2nd.瞬时流量</td>
                        <td>@station2nd.累计热量</td>
                        <td>@station2nd.累计流量</td>
                    </tr>
                }
            </table>
            </div>
        </div>
    </div>
</div>
<div class="row-fluid">
    <div class="box span8">
        <div class="box-header">
            <h2><i class="icon-list"></i>面积信息</h2>
        </div>
        <div class="box-content">
            <div class="row-fluid">
                <table class="table">
                    <tr>
                        <th></th>
                        <th>总面积</th>
                        <th>A类面积</th>
                        <th>A超</th>
                        <th>A轻</th>
                        <th>B类面积</th>
                        <th>B超</th>
                        <th>B轻</th>
                    </tr>
                    <tr>
                        <td>总供热面积</td>
                        <td>@Model.Customers.Sum(i=>i.A面积 + i.B面积)</td>
                        <td>@Model.Customers.Sum(i=>i.A面积)</td>
                        <td>@Model.Customers.Sum(i=>i.A超面积)</td>
                        <td>@Model.Customers.Sum(i=>i.A轻体)</td>
                        <td>@Model.Customers.Sum(i=>i.B面积)</td>
                        <td>@Model.Customers.Sum(i=>i.B超面积)</td>
                        <td>@Model.Customers.Sum(i=>i.B轻体)</td>
                    </tr>
                    <tr>
                        <td>实际供热面积</td>
                        <td >@Model.投入面积A @Model.投入面积B</td>
                        <td colspan="3">@if(Model.投入面积A.HasValue) {
                                            <text> @Model.投入面积A.Value </text>
                                        }
                                        else {
                                            <text> 0.00 </text>
                                        }
                        </td>
                        <td colspan="3">@if (Model.投入面积B.HasValue)
                                        {
                                            <text> @Model.投入面积B.Value </text>
                                        } else {
                                            <text> 0.00 </text>
                                        }
                        </td>
                    </tr>
                </table>
            </div>
            <div class="row-fluid">
                <div class=" span4">
                    <div id="placeholder2" style="height:200px;"></div>
                </div>
                <div class=" span4">
                    <div id="placeholder3" style="height:200px;"></div>
                </div>
                <div class=" span4">
                    <div id="placeholder4" style="height:200px;"></div>
                </div>
            </div>
        </div>
    </div>
    <div class="box span4">
        <div class="box-header">
            <h2><i class="icon-list"></i>地理位置</h2>
        </div>
        <div class="box-conent">
            <div id="stationMap" style="width:100%;height:330px"></div>
        </div>
    </div>
</div>
@Html.Hidden("hf_square", "[{ \"label\": \"总供热面积\", \"data\": " + @Convert.ToDecimal(Model.面积A + Model.面积B) + ", \"color\": \"#48abec\" }, { \"label\" : \"实际供热面积\", \"data\" :  " + @Convert.ToDecimal(Model.投入面积A + Model.投入面积B) + " , \"color\": \"#c14620\"}]")
@Html.Hidden("hf_ab_square", "[{ \"label\": \"A类面积\", \"data\": " + @Model.面积A + ", \"color\": \"#48abec\" }, { \"label\" : \"B类面积\", \"data\" :  " + @Model.面积B + " , \"color\": \"#c14620\"}]")
@Html.Hidden("hf_ab_hl_square", "[{ \"label\": \"A超面积\", \"data\": " + @Model.Customers.Sum(i => i.A超面积) + ", \"color\": \"#ecab00\" }, { \"label\" : \"B超面积\", \"data\" :  " + @Model.Customers.Sum(i => i.B超面积) + " , \"color\": \"#649316\"} , { \"label\" : \"A轻面积\", \"data\" :  " + @Model.Customers.Sum(i => i.A轻体) + " , \"color\": \"#c14620\"} , { \"label\" : \"B轻面积\", \"data\" :  " + @Model.Customers.Sum(i => i.B轻体) + " , \"color\": \"#48abec\"} ]")

<script type="text/javascript" src="http://api.map.baidu.com/api?v=1.5&ak=C17ce0c9f897bac7d7bb25196aca89d2"></script>

<script>
    $(function () {
        var data = $.parseJSON($("input[name=hf_square]").val());
        var data2 = $.parseJSON($("input[name=hf_ab_square]").val());
        var data_ab = $.parseJSON($("input[name=hf_ab_hl_square]").val());

        var series = Math.floor(Math.random() * 6) + 3;


        $.plot('#placeholder2', data, {
            series: {
                pie: {
                    show: true
                }
            }
        });
        $.plot('#placeholder3', data2, {
            series: {
                pie: {
                    show: true
                }
            }
        });
        $.plot('#placeholder4', data_ab, {
            series: {
                pie: {
                    show: true
                }
            }
        });
    });
</script>
<script type="text/javascript">

    // 百度地图API功能
    var map = new BMap.Map("stationMap");                        // 创建Map实例
    map.centerAndZoom(new BMap.Point(116.404, 39.915), 11);     // 初始化地图,设置中心点坐标和地图级别
    map.addControl(new BMap.NavigationControl());               // 添加平移缩放控件
    map.addControl(new BMap.ScaleControl());                    // 添加比例尺控件
    map.addControl(new BMap.OverviewMapControl());              //添加缩略地图控件
    map.enableScrollWheelZoom();                            //启用滚轮放大缩小
    map.addControl(new BMap.MapTypeControl());          //添加地图类型控件
    map.setCurrentCity("北京");          // 设置地图显示的城市 此项是必须设置的
</script>
