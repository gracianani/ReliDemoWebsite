@model ReliDemo.ViewModels.TopStatsViewModel

	<div class="row-fluid">
		<div class="smallstat box span12">
			<i class="icon-user orange"></i>
			<span class="title">@Model.当前时间.ToString("yyyy年MM月dd日")  @Model.当前时间.ToString("dddd",new System.Globalization.CultureInfo("zh-cn"))  </span>
			<span class="value">@Model.当前用户.姓名 <small>@Model.当前用户.权限们</small></span>
			<span class="time">欢迎进入智能化热网热耗管理系统</span>
		</div>
		<div class=" smallstat box span6 noMarginLeft">
			<i class="icon-cloud crimson"></i>
			<span class="title">@Model.TodaysWeather</span>
			<span class="value"><small>平均</small>@Model.TodaysAverageTemperature<small>℃</small></span>
			<span class="time alignvalue">@Model.TodaysHighestTemperature ℃ / @Model.TodaysLowestTemperature ℃</span>
		</div>
		<div class=" smallstat box span6">
			<i class="icon-time crimson"></i>
			<span class="title">累计供热时间</span>
			<span class="value">@Model.TotalHeatSupplyDays<small>天</small></span>
			<span class="time">供热开始日期: @Model.起始供热时间.ToString("yyyy-MM-dd") </span>
		</div>
		<div class=" smallstat box span6 noMarginLeft" id="todaysGJ">
			<i class="icon-fire crimson"></i>
			<span class="title">今日累计供热量</span>
			<span class="value highlightRed">@Model.今日累计供热量<small>GJ</small></span>
			<span class="time highlightRed">截至 @Model.当前时间.ToString("yyyy-MM-dd HH:mm:ss tt")</span>
		</div>
		<div class="smallstat box span6">
			<i class="icon-fire crimson"></i>
			<span class="title">昨日累计供热量</span> 
			<span class="value">@Model.昨日累计供热量<small>GJ</small></span>
			<span class="time">　</span>
		</div>

	</div>
	<div class="row-fluid">
		<div class=" smallstat box span6">
			<i class="icon-calendar-empty blue"></i>
			<span class="title">供热总面积</span>
			<span class="value">@Model.计划投入面积<small>万㎡</small></span>
			<span class="time">　</span>
		</div>
		<div class=" smallstat box span6">
			<i class="icon-calendar blue"></i>
			<span class="title">实际投入面积</span>
			<span class="value">@Model.实际投入面积 <small>万㎡</small></span>
			<span class="time alignvalue">未投入面积 0 万㎡</span>
		</div>
	</div>
	<div class="box">
		<div class="box-header backgroundColorHeader blue">
		<h2><i class="icon-calendar"></i><span class="break"></span></h2>
		</div>
		<div class="box-content">
			<table class="table makeTableHeaderAsBoxHeader">
				<thead>
					<tr>
						<th></th><th>今日</th><th>昨日</th>
					</tr>
				</thead>
				<tbody>
					<tr>
						<td>计划投入面积</td><td>0<small>万m<sup>2</sup></td><td>0<small>万m<sup>2</sup></td>
					</tr>
					<tr>
						<td>实际投入面积</td><td>0<small>万m<sup>2</sup></td><td>0<small>万m<sup>2</sup></td>
					</tr>
					<tr>
						<td>计划停止面积</td><td>0<small>万m<sup>2</sup></td><td>0<small>万m<sup>2</sup></td>
					</tr>
					<tr>
						<td>实际停止面积</td><td>0<small>万m<sup>2</sup></td><td>0<small>万m<sup>2</sup></td>
					</tr>
				</tbody>
			</table>
		</div>
	</div>



	







@Html.HiddenFor(m=>m.CompanyId)
@Html.HiddenFor(m=>m.ManagershipId)

<script>
    /* ---------- dashboard ---------- */
    jQuery(document).ready(function ($) {
        setInterval("getTodaysGJ()", 5*60*1000)
    });
    function getTodaysGJ() {
        $.ajax({
            url: "http://localhost:11223/HeatConsumptionService/GetTodaysGJ/" + $("input[name=CompanyId]").val() + "/" + $("input[name=ManagershipId]").val(),
            type: "GET",
            contentType: "application/json; charset=utf-8",
            dataType: "jsonp",
            data: '',
            success: function (data) {
                var updatedAt = new Date(data.UpdatedAt.match(/\d+/)[0] * 1);
                $("#todaysGJ span.time").html('更新时间:' + updatedAt.getFullYear() + '-' + (updatedAt.getMonth() + 1) + '-' + updatedAt.getDate() + ' ' + updatedAt.getHours() + ":" + updatedAt.getMinutes() + ":" + updatedAt.getSeconds() + (updatedAt.getHours() >= 12 ? 'PM' : 'AM'));
                $("#todaysGJ span.value").html(data.Value + "<small>" + data.Unit + "</small>");
                $("#todaysGJ").highlightAfterUpdate();
            }
        });
    }
</script>