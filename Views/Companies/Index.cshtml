@model ReliDemo.ViewModels.CompanyViewModel

@{
    ViewBag.Title = "Index";
    Layout = "~/Views/Shared/_Layout.cshtml";
}
<h2>@Model.Company.公司</h2>
<div class="row-fluid">
    <div class="span6">
        <a class="span4 smallstat box noMargin" onTablet="span12" onDesktop="span6"  href="#">
			<i class="icon-fire crimson"></i>
			<span class="title">今日累计供热量</span>
			<span class="value">1.8万GJ</span>
            <span class="time">截止到2013-11-02 15:30PM</span>
		</a>

		<a class="span4 smallstat box noMargin" onTablet="span12" onDesktop="span6"  href="#">
			<i class="icon-fire blue"></i>
			<span class="title">昨日累计供热量</span>
			<span class="value">2.1万GJ</span>
		</a>
		
		 <a class="span4 smallstat box noMargin" onTablet="span12" onDesktop="span6"  href="#">
			<i class="icon-calendar darkGreen"></i>
			<span class="title">累计供热时间</span>
			<span class="value">1天</span>
            <span class="time">供热开始日期:2013-11-01</span>
		</a>			
    </div>
    <div class="span6">
		<a class="span4 smallstat box noMargin" onTablet="span12" onDesktop="span4" href="#">
			<i class="icon-ok crimson"></i>
			<span class="title">计划投停面积</span>
			<span class="value">89/21<small>万㎡</small></span>
		</a>
		<a class="span4 smallstat box noMargin" onTablet="span12" onDesktop="span4" href="#">
			<i class="icon-ok crimson"></i>
			<span class="title">实际投停面积</span>
			<span class="value">56/54 <small>万㎡</small></span>
		</a>
		
		<a class="span4 smallstat box noMargin" onTablet="span12" onDesktop="span4" href="#">
			<i class="icon-sun orange"></i>
			<span class="title">今日天气 - 晴 微风</span>
			<span class="value">  <small> 10℃/-2℃   平均5℃</small></span>
		</a>
    </div>
</div>
<div class="row-fluid">
    <div class="span6" onTablet="span12">
        @Html.Partial("HeatConsumptionTotal", Model.TodayGJ)
        @Html.Partial("HeatConsumptionTotal", Model.YesterdayGJ)
		@Html.Partial("HeatConsumptionGraph", Model.Histories)
    </div>
    <div class="span6" onTablet="span12">
		
        <table class="table table-bordered table-hover  table-condensed backgroundColor white">
            <tr><td>热力站总数量(个)</td><td>@Model.Company.Managerships.Sum(i=>i.Stations.Count())</td><td>平均热负荷(GCal/h)</td><td colspan="3">186</td></tr>
            <tr><td>万平米循环水量(t/h)</td><td>1</td><td>瞬时单耗(GJ/h·㎡)</td><td>1</td><td>累计单耗(GJ/h·㎡)</td><td>1</td></tr>
            <tr><td>总瞬时流量(t/h)</td><td>1</td><td>总瞬时热量(GJ/h)</td><td>1</td><td>超标站数量(个)</td><td>111</td></tr>
        </table>
		
		<div class="box backgroundColor white">
			<div class="row-fluid">
				<div class="span6">
					<div id="company_exceed_station" class="pieChartWithCenterText" style="height:165px;padding-top:20px;">
					</div>
				</div>
				<div class="span6">
                    <div id="company_exceed_area" class="pieChartWithCenterText" style="height:165px;padding-top:20px;">
					</div>
				</div>
			</div>
		</div>
		
		<div class="row-fluid">	
		    <div class="box span12 noMarginLeft">
				<div class="box-header">
				<h2><i class="icon-tasks"></i>节能/超标热力站排行</h2>
				</div>
				<div class="box-content">
				<div class="row-fluid">
				    @Html.Partial("EnergyTopChart", Model.EnergyTopChart)
			    </div><!--/row-->
		        </div><!--/box-->
            </div><!--/row-->
        </div>
</div>
</div>
<div class="row-fluid">
    <div class="span12" onTablet="span12">
        <table class="table table-bordered backgroundColor white">
            @foreach( var center in Model.Centers){
                if (Model.Centers.First() == center)
                {
                    <tr><th>中心名称</th><th>投入面积(万㎡)</th><th>热力站数量(个)</th><th>平均热指标(Kcal/h)</th><th>平均热负荷(GCal/h)</th><th>单耗超标站数量(个)</th><th>流量超标站数量(个)</th></tr>
                }
                <tr>
                    <td>@Html.ActionLink(center.管理单位, "ManagershipInfo", new {managershipId = center.ItemID })</td>
                    <td>@( center.Stations.Sum(i=>i.投入面积A) + center.Stations.Sum(i=>i.投入面积B) )</td>
                    <td>@center.Stations.Count()</td>
                    <td>39</td>
                    <td>1.2</td>
                    <td>15</td>
                    <td>8</td>
                </tr>
            }
        </table>
    </div>
</div>

<script>
jQuery(document).ready(function ($) {
	var company_exceed_station_data = [

        {label: "单耗合格站数量", data:10},

        { label: "单耗超标站数量", data: 20 }

    ];
	var company_exceed_area_data = [

        {label: "万平米流量合格站数量", data:80},

        {label: "万平米流量超标站数量", data: 20}

    ];

    var company_exceed_station_options = {
            series: {
               pie: {
				show: true
				}
            },
			colors:["#2fabe9","#c84628"],
			legend: {
				show:false
			},
			grid: {
				hoverable:true,
				clickable:true
			}
         };

        $.plot($("#company_exceed_station"), company_exceed_station_data, company_exceed_station_options);
        $.plot($("#company_exceed_area"), company_exceed_area_data, company_exceed_station_options); 
	});
</script>