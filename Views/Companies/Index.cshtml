@model ReliDemo.ViewModels.CompanyViewModel

@{
    ViewBag.Title = "Index";
    Layout = "~/Views/Shared/_Layout.cshtml";
}



<h2>@Model.Company.公司</h2>
<div class="row-fluid">
    <div class="span8">
        @Html.Partial("HeatConsumptionTotal", Model.TodayHeatConsumptionPlan)
        @Html.Partial("HeatConsumptionTotal", Model.YesterdayHeatConsumptionAccu)
    </div>
    <div class="span4">
        <table class="table">
            <tr><td>站数量</td><td>@Model.Company.Managerships.Sum(i=>i.Stations.Count())</td><td>面积</td><td>111</td></tr>
            <tr><td>超标站数量</td><td>111</td><td>超标面积</td><td>111</td></tr>
        </table>

        <div id="placeholder_exceed"></div>
    </div>
</div>
<div class="row-fluid">
    <div class="span8">
        @Html.Partial("HeatConsumptionGraph", Model.TodayHeatConsumptionPlan)
    </div>
</div>
<div class="row-fluid">
    <div class="span8">
        <table class="table">
            @foreach( var center in Model.Centers){
                if (Model.Centers.First() == center)
                {
                    <tr><th>中心名称</th><th>热力站数量</th><th>面积</th><th>超标热力站数量</th><th>超标面积</th><th>超标比例</th></tr>
                }
                <tr>
                    <td>@Html.ActionLink(center.管理单位, "ManagershipInfo", new {managershipId = center.ItemID })</td>
                    <td>@center.Stations.Count()</td>
                    <td>@( center.Stations.Sum(i=>i.投入面积A) + center.Stations.Sum(i=>i.投入面积B) )</td>
                    <td>111</td>
                    <td>111</td>
                    <td>111</td>
                </tr>
            }
        </table>
    </div>
</div>
