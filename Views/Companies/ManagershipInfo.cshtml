@model ReliDemo.ViewModels.ManagershipViewModel

@{
    ViewBag.Title = "ManagershipInfo";
    Layout = "~/Views/Shared/_Layout.cshtml";
}

<h2>@Model.Managership.管理单位</h2>

@Html.Partial("TopStats", Model.TopStats)

<div class="row-fluid">
    <div class="span6" onTablet="span12 noMarginLeft" onDesktop="span6">
		@Html.Partial("HeatConsumptionTotal", Model.TodayGJ)
	</div>
	<div class="span6" onTablet="span12 noMarginLeft" onDesktop="span6">
		 @Html.Partial("HeatConsumptionTotal", Model.YesterdayGJ)
		 <div class="box smallstat">
			<i class="icon-eye-open crimson"></i>
			<span class="title">监控站、智能卡站</span>
			<span class="value">@(Model.监控站个数 + Model.智能卡站个数) 个</span>
		</div>
    </div>
</div>
<div class="row-fluid">
	<div class="span6" onTablet="span12 noMarginLeft" onDesktop="span6">
		@Html.Partial("HeatConsumptionGraph", Model.Histories)
	</div>
	<div class="span6" onTablet="span12 noMarginLeft" onDesktop="span6">
		气象图表
	</div>
</div>
<div class="row-fluid">
	<div class="span6" onTablet="span12" onDesktop="span6">
	
       超标站图表
		
	</div>
	<div class="span6" onDesktop="span6" onTablet="span12 noMarginLeft">
		<div class="box smallstat mergeWithBottom">
			<i class="icon-pencil blue"></i>
			<span class="title">手抄表站</span>
			<span class="value">@Model.手抄表站个数 个</span>
			<span class="time">更新时间 : @string.Format("{0:yyyy年MM月dd日}",Model.手抄表最近更新时间)</span>
		</div>
        @Html.Partial("HeatConsumptionTotal", Model.手抄GJ)
	</div>
</div>
<div class="row-fluid">

        <table class="table table-bordered backgroundColor white table-condensed  table-hover table-clickhighlight table-dblclickactive">
            @foreach( var station in Model.Managership.Stations){
                if (Model.Managership.Stations.First() == station)
                {
                    <tr><th>热力站名称</th><th>热力站编号</th><th>供热面积(万㎡)</th><th>参考热指标(Kcal/h)</th><th>计划热指标(Kcal/h)</th><th>日累计单耗(w/㎡)</th><th>万平米循环水流量(t/h)</th></tr>
                }
                <tr>
                    <td>@Html.ActionLink(station.热力站名称 + " ", "StationRealTime", "Stations", new { stationId = station.ItemID }, new { })</td>
                    <td>@station.热力站编号 </td>
                    <td>@station.投入面积</td>
                    <td>@station.参考热指标</td>
                    <td>@station.计划热指标</td>
                    <td>@station.今日累计单耗</td>
                    <td>@station.万平方米流量</td>
                </tr>
            }
        </table>

</div>
<script>
    jQuery(document).ready(function ($) {
        var company_exceed_station_data = [

        { label: "单耗合格站数量", data: 10 },

        { label: "单耗超标站数量", data: 20 }

    ];
        var company_exceed_area_data = [

        { label: "万平米流量合格站数量", data: 80 },

        { label: "万平米流量超标站数量", data: 20 }

    ];

        var company_exceed_station_options = {
            series: {
                pie: {
                    show: true
                }
            },
            colors: ["#2fabe9", "#c84628"],
            legend: {
                show: false
            },
            grid: {
                hoverable: true,
                clickable: true
            }
        };

        $.plot($("#company_exceed_station"), company_exceed_station_data, company_exceed_station_options);
        $.plot($("#company_exceed_area"), company_exceed_area_data, company_exceed_station_options);
    });
</script>